


// Reviews
create table Review(
    id int primary key auto_increment,
    user_id int,
    book_id int,
    review varchar(500) not null,
    title varchar(100),
    rating int,
    date datetime,
    foreign key (user_id) references Users(id),
    foreign key (book_id) references Books(id)
);

select * from Review;
drop table Review;

//For creating Trigger
create trigger add_avg_rating after insert on review 
for each row
update books set 
	rating_sum = rating_sum + NEW.rating,
	rating_count = rating_count + 1,
	avg_ratings = round(rating_sum / rating_count)
where books.id = new.book_id;


//Alter books table
alter table books add avg_ratings int default 0;
alter table books add rating_count int default 0;
alter table books add rating_sum int default 0;